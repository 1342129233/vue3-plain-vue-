{
  "version": 3,
  "sources": ["../src/index.ts", "../../shared/src/index.ts", "../../runtime-core/src/vnode.ts", "../../runtime-core/src/renderer.ts", "../../runtime-core/src/h.ts", "../src/nodeOps.ts", "../src/modules/attr.ts", "../src/modules/class.ts", "../src/modules/event.ts", "../src/modules/style.ts", "../src/patchProp.ts"],
  "sourcesContent": ["import { createRenderer } from '@vue/runtime-core'\n\nimport { nodeOps } from './nodeOps'; \nimport { patchProp } from './patchProp'; \n\nconst renderOptions = Object.assign(nodeOps, { patchProp }); // domApi \u5C5E\u6027api\n\nexport function render(vnode, container) {\n    // \u5728\u521B\u5EFA\u6E32\u67D3\u5668\u7684\u65F6\u5019 \u4F20\u5165\n    createRenderer(renderOptions).render(vnode, container);\n}\n\nexport * from '@vue/runtime-core';\n\n", "export const isObject = (value) => {\n    return typeof value === 'object' && value !== null;\n}\n\nexport const isString = (value) => {\n    return typeof value === 'string';\n}\n\nexport const isNumber = (value) => {\n    return typeof value === 'number';\n}\n\nexport const isFunction = (value) => {\n    return typeof value === 'function';\n}\n\nexport const isArray = Array.isArray;\nexport const assign = Object.assign;\n\n// vue3 \u63D0\u4F9B\u7684\u5F62\u72B6\u6807\u8BC6\nexport const enum ShapeFlags {\n    // \u5143\u7D20\n    ELEMENT = 1,\n    // \u51FD\u6570\u7EC4\u4EF6\n    FUNCTIONAL_COMPONENT = 1 << 1,\n    // \u5E26\u72B6\u6001\u7EC4\u4EF6\n    STATEFUL_COMPONENT = 1 << 2,\n    // \u63CF\u8FF0\u513F\u5B50\n\n    TEXT_CHILDREN = 1 << 3,\n    // \u6570\u7EC4\u8282\u70B9\n    ARRAY_CHILDREN = 1 << 4,\n    // \u63D2\u69FD\n    SLOTS_CHILDREN = 1 << 5,\n    // \u7EC4\u4EF6\n    TELEPORT = 1 << 6,\n    SUSPENSE = 1 << 7,\n    COMPONENT_SHOULD_KEEP_ALIVE = 1 << 8,\n    COMPONENT_KEPT_ALIVE = 1 << 9,\n    COMPONENT = ShapeFlags.STATEFUL_COMPONENT | ShapeFlags.FUNCTIONAL_COMPONENT\n}\n", "import { isArray, isObject, isString, ShapeFlags } from \"@vue/shared\";\nexport const Text = Symbol('Text');\n\nexport function isVnode(value) {\n    return !!(value && value.__v_isVnode);\n}\n\n// \u662F\u4E0D\u662F\u76F8\u540C\u7684\u8282\u70B9\n// \u5224\u65AD\u4E24\u4E2A\u865A\u62DF\u8282\u70B9\u662F\u5426\u662F\u76F8\u540C\u8282\u70B9, : 1.\u4FBF\u7B7E\u540D\u76F8\u540C 2. key \u662F\u4E00\u6837\u7684\nexport function isSameVnode(n1, n2) {\n  return (n1.type === n2.type) && (n1.key === n2.key)\n}\n\nexport function createVnode(type, props, children = null) {\n    \n    // \u662Fstring \u8BF4\u660E\u8981\u6E32\u67D3\u5143\u7D20\n    let shapeFlag = isString(type)\n      ? ShapeFlags.ELEMENT\n      : isObject(type) // \u662F\u5BF9\u8C61\u8BF4\u660E\u662F\u7EC4\u4EF6\n      ? ShapeFlags.STATEFUL_COMPONENT\n      : 0\n  \n    const vnode = {\n      type,\n      props,\n      children,\n      el: null, \n      key: props?.key,\n      __v_isVnode: true,\n      shapeFlag // \u5B9A\u4E49\u8282\u70B9\u7684\u7C7B\u578B\n    }\n  \n    if (children) {\n      let type = 0\n      if (isArray(children)) {\n        type = ShapeFlags.ARRAY_CHILDREN // \u6807\u8BC6\u513F\u5B50\u662F\u6570\u7EC4\n      } else if (isObject(children)) {\n        type = ShapeFlags.SLOTS_CHILDREN // \u5982\u679Cchildren \u662F\u5BF9\u8C61\u5219\u8BF4\u660E\u662F\u5E26\u6709\u63D2\u69FD\u7684\n      } else {\n        children = String(children)\n        type = ShapeFlags.TEXT_CHILDREN\n      }\n      vnode.shapeFlag |= type // \u8BA1\u7B97\u5F97\u51FA\u8FD9\u4E2A\u5143\u7D20\u7684\u7C7B\u578B\n    }\n    return vnode\n  }\n", "\nimport { isArray, isString, ShapeFlags, isNumber } from \"@vue/shared\";\nimport { createVnode, Text, isSameVnode } from './vnode';\n\nexport function createRenderer(renderOptions) {\n    let {\n        insert: hostInsert,\n        remove: hostRemove,\n        setElementText: hostSetElementText,\n        setText: hostSetText,\n        parentNode: hostParentNode,\n        nextSibling: hostNextSibling,\n        createElement: hostCreateElement,\n        createText: hostCreateText,\n        patchProp: hostPatchProp\n      } = renderOptions\n\n    const normalize = (children, i) => {\n        // \u68C0\u6D4B\u5982\u679C\u662F\u5B57\u7B26\u4E32\u7684\u8BDD\uFF0C\u5C31\u628A\u5B57\u7B26\u4E32\u8F6C\u6362\u6210\u6587\u672C\u8282\u70B9\n        if (isString(children[i]) || isNumber(children[i])) {\n          let vnode = createVnode(Text, null, children[i])\n          children[i] = vnode\n        }\n        return children[i]\n      }\n    // \u521B\u5EFA\u5B50\u5143\u7D20\u9012\u5F52\n    const mountChildren = (children, container) => {\n        for(let i = 0; i < children.length; i++) {\n            let child = normalize(children, i); // \u5904\u7406\u540E\u8981\u8FDB\u884C\u66FF\u6362, \u5426\u5219 children \u4E2D\u5B58\u653E\u7684\u5DF2\u7ECF\u662F\u5B57\u7B26\u4E32\n            patch(null, child, container)\n        }\n    }\n\n    /**\n     * \u628A\u865A\u62DF\u8282\u70B9\u9012\u5F52\u8F6C\u6362\u6210\u771F\u5B9Edom\n     * @param vnode \u865A\u62DF\u8282\u70B9\n     * @param container \u5BB9\u5668\n     */\n    const mountElement = (vnode, container, anchor) => {\n        let { type, props, children, shapeFlag } = vnode\n        // \u6839\u636E type \u521B\u5EFA\u5143\u7D20\uFF0C\u5E76\u4E14\u628A\u771F\u5B9Edom\u6302\u8F7D\u5230\u8FD9\u4E2A\u865A\u62DF\u8282\u70B9\u4E0A\n        let el = (vnode.el = hostCreateElement(type))\n\n        // \u5982\u679C\u6709 props \u5C31\u5FAA\u73AF\u6DFB\u52A0  props \u5305\u62EC style class event attrs\n        if (props) {\n        for (let key in props) {\n            hostPatchProp(el, key, null, props[key])\n        }\n        }\n        // \u5982\u679C\u662F\u6587\u672C\n        if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {\n            hostSetElementText(el, children)\n        }\n        // \u5982\u679C\u662F\u6570\u7EC4\n        else if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n            mountChildren(children, el)\n        }\n        // \u628A\u771F\u5B9E\u8282\u70B9\u63D2\u5165\u5230\u5BB9\u5668\u4E2D\n        hostInsert(el, container, anchor)\n    }\n\n    const processText = (n1, n2, container) => {\n        if(n1 === null) {\n            // \u521B\u5EFA\u51FAn2\u5BF9\u5E94\u7684\u771F\u5B9Edom\uFF0C\u5E76\u4E14\u628A\u771F\u5B9Edom\u6302\u8F7D\u5230\u8FD9\u4E2A\u865A\u62DF\u8282\u70B9\u4E0A\uFF0C\u5E76\u4E14\u628A\u771F\u5B9Edom\u63D2\u5165\u5230\u5BB9\u5668\u4E2D\n            hostInsert((n2.el = hostCreateText(n2.children)), container)\n        } else {\n            // \u6587\u672C\u7684\u5185\u5BB9\u53D8\u5316\u4E86,\u53EF\u4EE5\u670D\u7528\u8001\u7684\u8282\u70B9\n            const el = n2.el = n1.el;\n            if(n1.children !== n2.children) {\n                hostSetText(el, n2.children); // \u6587\u672C\u7684\u66F4\u65B0 \n            }\n        }\n    }\n\n    const patchProps = (oldProps, newProps, el) => {\n        // \u65B0\u7684\u91CC\u9762\u6709\u76F4\u63A5\u7528\u65B0\u7684\u8986\u76D6\u6389\u5373\u53EF\n        for (let key in newProps) {\n            hostPatchProp(el, key, oldProps[key], newProps[key])\n        }\n        // \u5982\u679C\u8001\u7684\u91CC\u9762\u6709\u65B0\u7684\u91CC\u9762\u6CA1\u6709\uFF0C\u5219\u662F\u5220\u9664\n        for (let key in oldProps) {\n            if (newProps[key] == null) {\n                hostPatchProp(el, key, oldProps[key], undefined)\n            }\n        }\n    }\n    // \u5220\u9664\u5FAA\u73AF\u91CC\u7684\u6BCF\u4E00\u9879\n    const unmountChildren = (children) => {\n        for(let i = 0; i < children.length; i++) {\n            unmount(children[i])\n        }\n    };\n    // \u6BD4\u8F83\u4E24\u4E2A\u513F\u5B50\u7684\u5DEE\u5F02\n    const patchKeyedChildren = (c1, c2, el) => {\n        // debugger;\n        let i = 0;\n        let e1 = c1.length - 1; // \u8001\u7684\u7EC4\u4EF6\u957F\u5EA6 2\n        let e2 = c2.length - 1; // \u65B0\u7684\u7EC4\u4EF6\u957F\u5EA6 3\n\n        // \u7279\u6B8A\u5904\u7406......\n        // \u4ECE\u5934\u90E8\u6BD4\u8F83\n        while(i <= e1 && i <= e2) { // \u6709\u4EFB\u4F55\u4E00\u65B9\u505C\u6B62\u5FAA\u73AF\u5219\u76F4\u63A5\u8DF3\u51FA\n            const n1 = c1[i]\n            const n2 = c2[i]\n            if(isSameVnode(n1, n2)) { // \u6BD4\u8F83\u4E24\u4E2A\u8282\u70B9\u7684\u5C5E\u6027\u548C\u5B50\u8282\u70B9 // \u8282\u70B9\u4E00\u6837\u662F true\n                patch(n1, n2, el); // \u521B\u5EFA\u65B0\u8282\u70B9\n            } else {\n                break;\n            }\n            i++;\n        }\n\n        // \u4ECE\u5C3E\u90E8\u6BD4\u8F83\n        while(i <= e1 && i <= e2) {\n            const n1 = c1[i];\n            const n2 = c2[i];\n            if(isSameVnode(n1, n2)) {\n                patch(n1, n2, el);\n            } else {\n                break;\n            }\n            e1--;\n            e2--;\n        }\n\n        // i \u8981\u6BD4 e1 \u5927\u8BF4\u660E\u6709\u65B0\u589E\u7684\n        // i < e2 \u4E4B\u95F4\u7684\u662F\u65B0\u589E\u7684\u90E8\u5206\n\n        // \u6709\u4E00\u65B9\u5168\u90E8\u6BD4\u8F83\u5B8C\u6BD5\u4E86,\u8981\u4E48\u5220\u9664,\u8981\u4E48\u6DFB\u52A0\n        // \u6DFB\u52A0\n        if(i > e1) {\n            if(i <= e2) {\n                while(i <= e2) {\n                    const nextPos = e2 + 1;\n                    // \u6839\u636E\u4E00\u4E2A\u4EBA\u7684\u7D22\u5F15\u6765\u770B\u53C2\u7167\u7269\n                    const anchor = nextPos < c2.lengtht ? c2[nextPos].el : null;\n                    patch(null, c2[i], el, anchor); // \u521B\u5EFA\u65B0\u8282\u70B9 \u6254\u5230\u5BB9\u5668\u4E2D\n                    i++;\n                }\n            }\n        } else if(i > e2) {\n            // i \u6BD4 e2 \u5927\u8BF4\u660E\u6709\u8981\u5378\u8F7D\u7684\n            // i \u5230 e1 \u4E4B\u524D\u5C31\u662F\u8981\u5378\u8F7D\u7684\n            if(i < e1) {\n                while(i < e1) {\n                    unmount(c1[i]);\n                    i++;\n                }\n            }\n        }\n    }\n    // \u66F4\u65B0\u5B50\u5143\u7D20\n    const patchChildren = (n1, n2, el) => {\n        // \u6BD4\u8F83\u4E24\u4E2A\u865A\u62DF\u8282\u70B9\u7684\u513F\u5B50\u7684\u5DEE\u5F02\uFF0Cel \u5C31\u662F\u5F53\u524D\u7684\u7236\u8282\u70B9\n        const c1 = n1 && n1.children;\n        const c2 = n1 && n2.children;\n\n        const prevShapeFlag = n1.shapeFlag; // \u4E4B\u524D\u7684\n        const shapeFlag = n2.shapeFlag; // \u65B0\u7684\n\n        // 1. \u65B0\u7684\u662F\u6587\u672C,\n        if(shapeFlag & ShapeFlags.TEXT_CHILDREN) {\n            // \u8001\u7684\u662F\u6570\u7EC4\n            if(prevShapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n                // \u5220\u9664\u6240\u6709\u5B50\u5143\u7D20\n                unmountChildren(c1) // \u6587\u672C \u6570\u7EC4\n            }\n            // \u8001\u7684\u662F\u6587\u672C/\u8001\u7684\u662F\u7A7A\u7684\n            if(c1 !== c2) {\n                hostSetElementText(el, c2); // \u6587\u672C \u6587\u672C\n            }\n        } else {\n            // \u73B0\u5728\u4E3A\u6570\u7EC4\u6216\u7A7A\u7684\n            if(prevShapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n                if(shapeFlag & ShapeFlags.ARRAY_CHILDREN) { // \u6570\u7EC4 \u6570\u7EC4\n                    // diff \u7B97\u6CD5\n                    patchKeyedChildren(c1, c2, el); // \u5168\u91CF\u5BF9\u6BD4\n                } else {\n                    // \u73B0\u5728\u4E0D\u662F\u6570\u7EC4\uFF08\u6587\u672C/\u7A7A\uFF09\n                    unmountChildren(c1) // \u7A7A \u6570\u7EC4\n                }\n            } else {\n                if(prevShapeFlag & ShapeFlags.TEXT_CHILDREN) { // \u6570\u7EC4 \u6587\u672C\n                    hostSetElementText(el, '')\n                }\n                if(shapeFlag & ShapeFlags.ARRAY_CHILDREN) { // \u6570\u7EC4 \u6587\u672C\n                    mountChildren(el, '')\n                }\n            }\n        }\n\n        // \u6587\u672C \u7A7A\u7684 null \u6570\u7EC4\n        // \u6BD4\u8F83\u5DEE\u5F02\n    }\n\n    // \u66F4\u65B0\u5143\u7D20: \u5148\u590D\u7528\u8282\u70B9 \u518D\u6BD4\u8F83\u5C5E\u6027 \u518D\u6BD4\u8F83\u513F\u5B50\n    const patchElement = (n1, n2, container) => {\n        let el = n2.el = n1.el;\n\n        let oldProps = n1.props || {};\n        let newProps = n2.props || {};\n\n        // \u53BB\u6BD4\u8F83\n        patchProps(oldProps, newProps, el);\n\n        // \u6BD4\u8F83\u513F\u5B50\n        patchChildren(n1, n2, el)\n    };\n\n    // \u5904\u7406\u662F\u521B\u5EFA\u8FD8\u662F\u66F4\u65B0\n    const processElement = (n1, n2, container, anchor) => {\n        if(n1 === null) { \n            mountElement(n2, container, anchor)\n        } else {\n            patchElement(n1, n2, container)\n        }\n    }\n\n    // \u6838\u5FC3\u65B9\u6CD5\n    const patch = (n1, n2, container, anchor = null) => {\n        // \u8001\u8282\u70B9\u548C\u65B0\u8282\u70B9\u4E00\u6837\uFF0C\u8FD9\u4E2A\u65F6\u5019\u4E0D\u9700\u8981\u66F4\u65B0\n        if (n1 === n2) {\n            return\n        }\n\n        // \u5224\u65AD\u4E24\u4E2A\u5143\u7D20\u662F\u4E0D\u662F\u76F8\u540C\uFF0C\u4E0D\u76F8\u540C\uFF0C\u5378\u8F7D\u518D\u6DFB\u52A0\n        if(n1 && !isSameVnode(n1, n2)) {\n            // \u5220\u9664\u8001\u7684\n            unmount(container._vnode)\n            n1 = null\n        }\n        const { type, shapeFlag } = n2;\n        // \u521D\u6B21\u6E32\u67D3\n        // \u540E\u7EED\u8FD8\u6709\u7EC4\u4EF6\u7684\u521D\u6B21\u6E32\u67D3,\u76EE\u524D\u662F\u5143\u7D20\u7684\u521D\u6B21\u6E32\u67D3\n        switch(type) {\n            case Text: \n                processText(n1, n2, container);\n                break;\n            default: \n                // \u5143\u7D20\n                if(shapeFlag & ShapeFlags.ELEMENT) {\n                    processElement(n1, n2, container, anchor);\n                }\n        }\n    }\n    // \u53EF\u4EE5\u5378\u8F7D\u5143\u7D20 \u6587\u672C \u5C5E\u6027\n    const unmount = (vnode) => {\n        // \u5378\u8F7D\u5143\u7D20\n        hostRemove(vnode)\n    }\n\n    /**\n     *\n     * @param vnode \u865A\u62DF\u8282\u70B9\n     * @param container \u5BB9\u5668\n     */\n    const render = (vnode, container) => {\n        if (vnode == null) {\n        // \u5378\u8F7D\u7684\u903B\u8F91\n        // \u5224\u65AD\u4E00\u4E0B\u5BB9\u5668\u4E2D\u662F\u5426\u6709\u865A\u62DF\u8282\u70B9\n        if (container._vnode) {\n            unmount(container._vnode)\n        }\n        } else {\n        // \u7B2C\u4E00\u6B21\u7684\u65F6\u5019 vnode \u662F null\n        // \u7B2C\u4E8C\u6B21\u7684\u65F6\u5019\u5C31\u4F1A\u4ECE \u5BB9\u5668\u4E0A\u53BB\u53D6 vnode \u8FDB\u884C\u8D70\u66F4\u65B0\u7684\u903B\u8F91\n        patch(container._vnode || null, vnode, container)\n        }\n        // \u5728\u5BB9\u5668\u4E0A\u4FDD\u5B58\u4E00\u4EFD vnode\n        container._vnode = vnode\n    }\n    return {\n        render\n    }\n}\n\n\n// \u6CE8\u610F\u4E8B\u9879\uFF1A\n// \u6587\u672C\u7684\u5904\u7406\u9700\u8981\u81EA\u5DF1\u6DFB\u52A0\u7C7B\u578B\uFF0C\u4E0D\u80FD\u901A\u8FC7document.createElement\u6765\u521B\u5EFA\n// \u5982\u679C\u4F20\u5165\u7684vnode \u662F null\u7684\u8BDD\uFF0C\u5219\u662F\u5378\u8F7D\u903B\u8F91\uFF0C\u9700\u8981\u5220\u9664DOM\u8282\u70B9\n\n// \u66F4\u65B0\u7684\u60C5\u51B5\u5206\u6790\uFF1A\n// 1.\u5982\u679C\u524D\u540E\u5B8C\u5168\u6CA1\u6709\u5173\u7CFB div -> p \uFF0C\u90A3\u4E48\u4E45\u5220\u9664\u8001\u7684 \u6DFB\u52A0\u65B0\u7684\u8282\u70B9\n// 2.\u8001\u7684\u548C\u65B0\u7684\u4E00\u6837\uFF0C\u5982\u679C\u5C5E\u6027\u4E0D\u4E00\u6837\uFF0C\u5C31\u6BD4\u5BF9\u5C5E\u6027\uFF0C\u7136\u540E\u66F4\u65B0\u5C5E\u6027\n// 3.\u5982\u679C\u5C5E\u6027\u90FD\u4E00\u6837\uFF0C\u5C31\u6BD4\u8F83\u513F\u5B50\n\n// \u65B0\u513F\u5B50 \u8001\u513F\u5B50 \u64CD\u4F5C\u65B9\u5F0F\n// \u6587\u672C   \u6570\u7EC4  \u5220\u9664\u8001\u513F\u5B50\uFF0C\u8BBE\u7F6E\u6587\u672C\u5185\u5BB9\n// \u6587\u672C   \u6587\u672C  \u66F4\u65B0\u6587\u672C\n// \u6587\u672C   \u7A7A    \u66F4\u65B0\u6587\u672C\n// \u6570\u7EC4   \u6570\u7EC4  diff\u7B97\u6CD5\n// \u6570\u7EC4   \u6587\u672C  \u6E05\u7A7A\u6587\u672C\u6302\u8F7D\n// \u6570\u7EC4   \u7A7A    \u8FDB\u884C\u6302\u8F7D\n// \u7A7A     \u6570\u7EC4  \u5220\u9664\u6240\u6709\u513F\u5B50\n// \u7A7A     \u6587\u672C  \u6E05\u7A7A\u6587\u672C\n// \u7A7A     \u7A7A    \u65E0\u9700\u5904\u7406\n", "// render(h('h1', 'hello'), app)\n\nimport { isArray, isObject } from '@vue/shared'\nimport { createVnode, isVnode } from './vnode'\n\n// render(h('h1', null, h('span', null, 'hihi'), h('span', null, '999')), app)\n\n// render(h('h1', h('span', null, 'hihi')), app)\n\n// render(h('h1', null, 'hello', 'world'), app)\n\n// render(\n//   h('h1', { style: { color: 'red' } }, [h('span', null, 'hello'), h('span', null, 'world')]),\n//   app\n// )\n/**\n * \u5148\u6765\u770B\u4E00\u4E0B h \u51FD\u6570\u7684\u51E0\u79CD\u4F7F\u7528\u65B9\u6CD5\n * @param type  \u6807\u7B7E\n * @param propsChildren   \u653E\u5C5E\u6027\n * @param children  \u653E\u513F\u5B50\n */\nexport function h(type, propsChildren, children) {\n  let l = arguments.length\n  // h('div',{style:{\"color\"\uFF1A\u201Cred\u201D}})\n  // h('div',h('span'))\n  // h('div',[h('span'),h('span')])\n  // h('div','hello')\n  if (l === 2) {\n    // \u4E3A\u4EC0\u4E48\u8981\u5C06\u513F\u5B50\u5305\u88C5\u6210\u6570\u7EC4\uFF0C \u56E0\u4E3A\u5143\u7D20\u53EF\u4EE5\u5FAA\u73AF\u521B\u5EFA\u3002 \u6587\u672C\u4E0D\u9700\u8981\u5305\u88C5\u4E86\n    if (isObject(propsChildren) && !isArray(propsChildren)) {\n      // h('div',h('span'))\n      if (isVnode(propsChildren)) {\n        return createVnode(type, null, [propsChildren])\n      }\n      return createVnode(type, propsChildren) // \u662F\u5C5E\u6027 h('div',{style:{\"color\"\uFF1A\u201Cred\u201D}})\n    }\n    // \u662F\u6570\u7EC4  h('div',[h('span'),h('span')])\n    // \u6587\u672C\u4E5F\u8D70\u8FD9\u91CC h('div','hello')\n    else {\n      return createVnode(type, null, propsChildren)\n    }\n  } else {\n    if (l > 3) {\n      children = Array.from(arguments).slice(2)\n    } else if (l === 3 && isVnode(children)) {\n      // h('div,{},h('span'))\n      children = [children]\n    }\n    return createVnode(type, propsChildren, children)\n  }\n}", "// \u5B9E\u73B0 dom \u8282\u70B9 \u7684 \u589E\u52A0 \u5220\u9664 \u4FEE\u6539 \u67E5\u8BE2\nexport const nodeOps = {\n  // \u63D2\u5165\u8282\u70B9\n  insert(child, parent, anchor = null) {\n    parent.insertBefore(child, anchor) // \u5982\u679C\u6CA1\u6709\u53C2\u8003\u7684\u5143\u7D20\uFF0C\u5C31\u76F8\u5F53\u4E8E appendChild\n  },\n  // \u79FB\u9664\u8282\u70B9\n  remove(child) {\n    let parentNode = child.parentNode\n    if (parentNode) {\n      parentNode.removeChild(child)\n    }\n  },\n  // \u8BBE\u7F6E\u5143\u7D20\u6587\u672C\n  setElementText(el, text) {\n    el.textContent = text\n  },\n  // \u8BBE\u7F6E\u6587\u672C\u8282\u70B9\u5185\u5BB9\n  setText(node, text) {\n    node.nodeValue = text\n  },\n  // \u67E5\u8BE2\u5143\u7D20\n  querySelector(selector) {\n    document.querySelector(selector)\n  },\n  // \u8FD4\u56DE\u5143\u7D20\u7684\u7236\u8282\u70B9\n  parentNode(node) {\n    return node.parentNode\n  },\n  // \u8FD4\u56DE\u5143\u7D20\u7684\u4E0B\u4E00\u4E2A\u5144\u5F1F\u8282\u70B9\n  nextSibling(node) {\n    return node.nextSibling\n  },\n  // \u521B\u5EFA\u5143\u7D20\n  createElement(tagName) {\n    return document.createElement(tagName)\n  },\n  //\u521B\u5EFA\u6587\u672C\u8282\u70B9\n  createText(text) {\n    return document.createTextNode(text)\n  }\n}\n", "/**\n *\n * @param el DOM \u5143\u7D20\n * @param key \u5C5E\u6027\u7684key   \u5C5E\u6027\u683C\u5F0F id=100\n * @param nextValue \u65B0\u503C\n */\n export function patchAttr(el, key, nextValue) {\n    if (nextValue) {\n      el.setAttribute(key, nextValue)\n    } else {\n      el.removeAttribute(key)\n    }\n  }\n  ", "export function patchClass(el, nextValue) {\n  if (nextValue == null) {\n    // \u4E0D\u9700\u8981 class \u5219\u76F4\u63A5\u79FB\u9664\n    el.removeAttribute('class')\n  } else {\n    el.className = nextValue\n  }\n}\n", "function createInvoker(callback) {\n  // \u5728\u5F53\u524D\u7684\u4E8B\u4EF6\u51FD\u6570\u4E0A\u9762\u6DFB\u52A0\u4E00\u4E2A\u5C5E\u6027\uFF0C\u7528\u6765\u7F13\u5B58\u4E8B\u4EF6\u51FD\u6570\uFF0C\u8FD9\u6837\u5982\u679C\u4E8B\u4EF6\u51FD\u6570\u53D1\u751F\u53D8\u5316\u4E86\uFF0C\u5C31\u4E0D\u7528\u9891\u7E41\u7684\u8C03\u7528 addEventListener\u51FD\u6570\n  // \u8FDB\u884C\u7ED1\u5B9A\uFF0C\u53EA\u9700\u8981\u4FEE\u6539 \u4E8B\u4EF6\u51FD\u6570\u7684.value \u5C5E\u6027\u5373\u53EF\u3002\n  const invoker = (e) => invoker.value(e)\n  invoker.value = callback\n  return invoker\n}\n\n// el._vei \u7684\u6570\u636E\u7ED3\u6784\n// {\n//   click: invoker1    invoker1.value,\n//   change: invoke2    invoke2.value\n// }\n// \u5728\u8FD9\u91CC\u505A\u4E86\u4E00\u4E2A\u7F13\u5B58\uFF0C\u5C06\u4E8B\u4EF6\u7ED1\u5B9A\u90FD\u7F13\u5B58\u5728 \u5F53\u524D\u7684DOM\u4E0A\u9762\nexport function patchEvent(el, eventName, nextValue) {\n  let invokers = el._vei || (el._vei = {})\n  let exits = invokers[eventName]\n  // \u5982\u679C\u5DF2\u7ECF\u7ED1\u5B9A\u8FC7\u4E86\uFF0C\u5E76\u4E14\u6709\u65B0\u7684\u4E8B\u4EF6\uFF0C\u5219\u4FEE\u6539\u539F\u6765\u7684 .value \u5373\u53EF\n  if (exits && nextValue) {\n    exits.value = nextValue\n  } else {\n    let event = eventName.slice(2).toLowerCase()\n    // \u5982\u679C\u6709\u65B0\u7684\u4E8B\u4EF6\n    if (nextValue) {\n      const invoker = (invokers[eventName] = createInvoker(nextValue))\n      el.addEventListener(event, invoker)\n    } else if (exits) {\n      // \u7ED1\u5B9A\u8FC7 \u4F46\u662F\u6CA1\u6709\u65B0\u503C\uFF0C\u5219\u9700\u8981\u79FB\u9664\u4E8B\u4EF6\n      el.removeEventListener(event, exits)\n      invokers[eventName] = null // \u6E05\u7A7A\u76F8\u5E94\u7684\u4E8B\u4EF6\u7F13\u5B58\n    }\n  }\n}\n", "export function patchStyle(el, prevValue, nextValue = {}) {\n    // \u5148\u76F4\u63A5\u7528\u65B0\u7684\u8986\u76D6\u8001\u7684\n    for (let key in nextValue) {\n      el.style[key] = nextValue[key]\n    }\n  \n    // \u5982\u679C\u8001\u7684\u91CC\u9762\u6709\uFF0C \u65B0\u7684\u91CC\u9762\u6CA1\u6709\uFF0C\u5219\u9700\u8981\u5220\u9664\n    // {color: 'blue', width: '20px'}   \u8001\u7684\n    // {color: 'red', height: '100px'}   \u65B0\u7684\n    // \u8FD9\u91CC\u5148\u628A\u65B0\u7684\u5168\u90E8\u7ED9DOM\u8282\u70B9\u8D4B\u503C\uFF0C\u7136\u540E\u5FAA\u73AF\u8001\u7684\uFF0C\u5982\u679C\u53D1\u73B0\u8001\u7684\u5C5E\u6027\u5DF2\u7ECF\u4E0D\u5728\u65B0\u7684\u91CC\u9762\u4E86\uFF0C\u5219\u9700\u8981\u5C06\u5F53\u524D\u5C5E\u6027\u5220\u9664\u6389\n  \n    for (let key in prevValue) {\n      if (nextValue[key] == null || nextValue[key] == undefined) {\n        el.style[key] = null\n      }\n    }\n  }\n  ", "import { patchAttr } from './modules/attr'\nimport { patchClass } from './modules/class'\nimport { patchEvent } from './modules/event'\nimport { patchStyle } from './modules/style'\n\n/**\n *\n * @param el \u4E00\u4E2A DOM \u5143\u7D20\n * @param key\n * @param prevValue  \u8001\u503C\n * @param nextValue  \u65B0\u503C\n */\nexport function patchProp(el, key, prevValue, nextValue) {\n  if (key === 'class') {\n    patchClass(el, nextValue)\n  } else if (key === 'style') {\n    patchStyle(el, prevValue, nextValue)\n  } else if (/^on[^a-z]/.test(key)) {\n    // \u8FD9\u91CC\u7684 key \u662F\u4E8B\u4EF6\u540D\u79F0\n    patchEvent(el, key, nextValue)\n  } else {\n    // \u8FD9\u91CC\u7684 key \u662F\u5C5E\u6027\u540D\u79F0\n    patchAttr(el, key, nextValue)\n  }\n}\n\n"],
  "mappings": "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",
  "names": ["type", "renderOptions", "render"]
}
